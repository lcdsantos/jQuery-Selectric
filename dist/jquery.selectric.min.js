/*! Selectric ÏŸ v1.7.0 (2014-06-27) - git.io/tjl9sQ - Copyright (c) 2014 Leonardo Santos - Dual licensed: MIT/GPL */
!function(a){"use strict";var b="selectric",c="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive",d=".sl",e={onOpen:a.noop,onClose:a.noop,onChange:function(b){a(b).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,customClass:{prefix:b,postfixes:c,camelCase:!0},optionsItemBuilder:"{text}"},f={replaceDiacritics:function(a){for(var b="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),c=b.length;c--;)a=a.toLowerCase().replace(RegExp("["+b[c]+"]","g"),"aeiouncy".charAt(c));return a},format:function(a){var b=arguments;return(""+a).replace(/{(\d+|(\w+))}/g,function(a,c,d){return d&&b[1]?b[1][d]:b[c]})},nextEnabledItem:function(a,b){for(;a[b=(b+1)%a.length].disabled;);return b},previousEnabledItem:function(a,b){for(;a[b=(b>0?b:a.length)-1].disabled;);return b}},g=a(document),h=a(window),i=function(i,j){function k(b){if(H.options=a.extend(!0,{},e,H.options,b),H.classes={},H.options.disableOnMobile&&L)return void(H.disableOnMobile=!0);t(!0);var d=H.options.customClass,f=d.postfixes.split(" ");a.each(c.split(" "),function(a,b){var c=d.prefix+f[a];H.classes[b.toLowerCase()]=d.camelCase?c:c.replace(/([A-Z])/g,"-$&").toLowerCase()}),u=a('<input class="'+H.classes.input+'"/>').prop("readonly",L),v=a('<div class="'+H.classes.items+'" tabindex="-1"></div>'),w=a('<div class="'+d.prefix+'">'+H.options.arrowButtonMarkup+"</div>"),x=a('<p class="label"/>'),y=I.wrap("<div>").parent().append(w.prepend(x),v,u),G={open:o,close:q,destroy:t,refresh:l,init:k},I.on(G).wrap('<div class="'+H.classes.hideselect+'">'),a.extend(H,G),K=!0,l()}function l(){H.items=[];var c=I.children(),e="<ul>",g=c.filter(":selected").index();B=A=~g?g:0,(F=c.length)&&(c.each(function(b){var c=a(this),d=c.html(),g=c.prop("disabled"),h=H.options.optionsItemBuilder;H.items[b]={value:c.val(),text:d,slug:f.replaceDiacritics(d),disabled:g},e+=f.format('<li class="{1}">{2}</li>',a.trim([b==B?"selected":"",b==F-1?"last":"",g?"disabled":""].join(" ")),a.isFunction(h)?h(H.items[b],c,b):f.format(h,H.items[b]))}),v.html(e+"</ul>"),x.html(H.items[B].text)),w.add(I).off(d),y.prop("class",[H.classes.disabled,H.classes.wrapper,I.prop("class").replace(/\S+/g,b+"-$&"),H.options.responsive?H.classes.responsive:""].join(" ")),I.prop("disabled")?u.prop("disabled",!0):(y.removeClass(H.classes.disabled).hover(function(){a(this).toggleClass(H.classes.hover)}),H.options.openOnHover&&w.on("mouseenter"+d,o),w.on("click"+d,function(a){J?q():o(a)}),u.prop("disabled",!1).off().on({keypress:m,keydown:function(a){m(a),clearTimeout(H.resetStr),H.resetStr=setTimeout(function(){u.val("")},H.options.keySearchTimeout);var b=a.keyCode||a.which;b>36&&41>b&&r(f[(39>b?"previous":"next")+"EnabledItem"](H.items,A))},focusin:function(a){u.one("blur",function(){u.blur()}),J||o(a)}}).on("oninput"in u[0]?"input":"keyup",function(){u.val().length&&a.each(H.items,function(a,b){return RegExp("^"+u.val(),"i").test(b.slug)&&!b.disabled?(r(a),!1):void 0})}),z=a("li",v.removeAttr("style")).click(function(){return r(a(this).index(),!0),!1}))}function m(a){/^(9|13|27)$/.test(a.keyCode||a.which)&&(a.stopPropagation(),r(A,!0))}function n(){var a=v.closest(":visible").children(":hidden"),b=H.options.maxHeight;a.addClass(H.classes.tempshow);var c=v.outerWidth(),d=w.outerWidth()-(c-v.width());!H.options.expandToItemText||d>c?E=d:(v.css("overflow","scroll"),y.width(9e4),E=v.width(),v.css("overflow",""),y.width("")),v.width(E).height()>b&&v.height(b),a.removeClass(H.classes.tempshow)}function o(b){b&&(b.preventDefault(),b.stopPropagation()),K&&(n(),a("."+H.classes.open).removeClass(H.classes.open),J=!0,C=v.outerHeight(),D=v.height(),u.val("").is(":focus")||u.focus(),g.on("click"+d,q).on("scroll"+d,p),p(),H.options.preventWindowScroll&&g.on("mousewheel"+d+" DOMMouseScroll"+d,"."+H.classes.items,function(a){var b=a.originalEvent,c=v.scrollTop(),d=0;"detail"in b&&(d=-1*b.detail),"wheelDelta"in b&&(d=b.wheelDelta),"wheelDeltaY"in b&&(d=b.wheelDeltaY),"deltaY"in b&&(d=-1*b.deltaY),(c==this.scrollHeight-D&&0>d||0==c&&d>0)&&a.preventDefault()}),H.options.openOnHover&&(clearTimeout(H.closeTimer),y.one("mouseleave"+d,function(){H.closeTimer=setTimeout(q,500)})),y.addClass(H.classes.open),s(A),H.options.onOpen(i))}function p(){n(),v.css("top",y.offset().top+y.outerHeight()+C>h.scrollTop()+h.height()?-C:"")}function q(a){if(!a&&B!=A){var b=H.items[A].text;I.prop("selectedIndex",B=A).data("value",b),H.options.onChange(i),x.html(b)}g.off(d),y.removeClass(H.classes.open),J=!1,H.options.onClose(i)}function r(a,b){H.items[A=a].disabled||(z.removeClass("selected").eq(a).addClass("selected"),s(a),b&&q())}function s(a){var b=z.eq(a).outerHeight(),c=z[a].offsetTop,d=v.scrollTop(),e=c+2*b;v.scrollTop(e>d+C?e-C:d>c-b?c-b:d)}function t(a){K&&(v.add(w).add(u).remove(),!a&&I.removeData(b).removeData("value"),I.off(d).off(G).unwrap().unwrap(),K=!1)}var u,v,w,x,y,z,A,B,C,D,E,F,G,H=this,I=a(i),J=!1,K=!1,L=/android|ip(hone|od|ad)/i.test(navigator.userAgent);k(j)};a.fn[b]=function(c){return this.each(function(){var d=a.data(this,b);d&&!d.disableOnMobile?""+c===c&&d[c]?d[c]():d.init(c):a.data(this,b,new i(this,c))})}}(jQuery);